trafficReport <- read_csv("data/LTATrafficDataClean2.csv")
temp <- read_csv("data/temp.csv")
install.packages("timetk")
library("tidyverse", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
library("tmap", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
library("tmaptools", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
library("rgdal", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
library("rgeos", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
trafficReport <- read_csv("data/LTATrafficDataClean2.csv")
trafficReport_shp <- st_as_sf(trafficReport, coords = c("Longitude", "Latitude"), crs = "+proj=longlat +datum=WGS84 +no_defs")
temp <- read_csv("data/temp.csv")
accidents <- temp %>% filter(Type == "Accident")
roadworks <- temp %>% filter(Type == "Roadwork")
accidents_ppp <- ppp(accidents$X, accidents$Y, c(min(accidents$X), max(accidents$X)), c(min(accidents$Y), max(accidents$Y)))
roadNetwork <- readShapeSpatial("data/RoadNetwork/roads_expressway")
plot(linearK(accidents_lpp, correction="none", ratio=FALSE))
library("spatstat", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
plot(density.lpp(accidents_lpp, 1000))
accidents_lpp <- lpp(accidents_ppp, roadNetwork_linnet)
roadNetwork <- readShapeSpatial("data/RoadNetwork/roads_expressway")
library("maptools", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
roadNetwork <- readShapeSpatial("data/RoadNetwork/roads_expressway")
roadNetwork_psp <- as.psp(roadNetwork, window=NULL, marks=NULL, check=spatstat.options("checksegments"), fatal=TRUE)
roadNetwork_linnet <- as.linnet.psp(roadNetwork_psp, sparse=TRUE)
plot(roadNetwork_linnet)
accidents_lpp <- lpp(accidents_ppp, roadNetwork_linnet)
temp <- read_csv("data/temp.csv")
accidents <- temp %>% filter(Type == "Accident")
roadworks <- temp %>% filter(Type == "Roadwork")
accidents_ppp <- ppp(accidents$X, accidents$Y, c(min(accidents$X), max(accidents$X)), c(min(accidents$Y), max(accidents$Y)))
roadworks_ppp <- ppp(roadworks$X, roadworks$Y, c(min(roadworks$X), max(roadworks$X)), c(min(roadworks$Y), max(roadworks$Y)))
plot(accidents_ppp)
plot(roadworks_ppp)
accidents_lpp <- lpp(accidents_ppp, roadNetwork_linnet)
plot(linearK(accidents_lpp, correction="none", ratio=FALSE))
trafficReport <- read_csv("data/LTATrafficDataClean2.csv")
library("readr", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
trafficReport <- read_csv("data/LTATrafficDataClean2.csv")
trafficReport_shp <- st_as_sf(trafficReport, coords = c("Longitude", "Latitude"), crs = "+proj=longlat +datum=WGS84 +no_defs")
detach("package:readr", unload=TRUE)
library(readr)
trafficReport <- read_csv("data/LTATrafficDataClean2.csv")
trafficReport_shp <- st_as_sf(trafficReport, coords = c("Longitude", "Latitude"), crs = "+proj=longlat +datum=WGS84 +no_defs")
temp <- read_csv("data/temp.csv")
accidents <- temp %>% filter(Type == "Accident")
library(tidyverse)
temp <- read_csv("data/temp.csv")
accidents <- temp %>% filter(Type == "Accident")
roadworks <- temp %>% filter(Type == "Roadwork")
accidents_ppp <- ppp(accidents$X, accidents$Y, c(min(accidents$X), max(accidents$X)), c(min(accidents$Y), max(accidents$Y)))
library(tidyverse)
library(spatstat)
temp <- read_csv("data/temp.csv")
accidents <- temp %>% filter(Type == "Accident")
roadworks <- temp %>% filter(Type == "Roadwork")
accidents_ppp <- ppp(accidents$X, accidents$Y, c(min(accidents$X), max(accidents$X)), c(min(accidents$Y), max(accidents$Y)))
roadworks_ppp <- ppp(roadworks$X, roadworks$Y, c(min(roadworks$X), max(roadworks$X)), c(min(roadworks$Y), max(roadworks$Y)))
plot(accidents_ppp)
plot(roadworks_ppp)
library(tidyverse)
library(spatstat)
temp <- read_csv("data/temp.csv")
accidents <- temp %>% filter(Type == "Accident")
roadworks <- temp %>% filter(Type == "Roadwork")
accidents_ppp <- ppp(accidents$X, accidents$Y, c(min(accidents$X), max(accidents$X)), c(min(accidents$Y), max(accidents$Y)))
roadworks_ppp <- ppp(roadworks$X, roadworks$Y, c(min(roadworks$X), max(roadworks$X)), c(min(roadworks$Y), max(roadworks$Y)))
plot(accidents_ppp)
plot(roadworks_ppp)
roadNetwork <- readShapeSpatial("data/RoadNetwork/roads_expressway")
library(maptools)
roadNetwork <- readShapeSpatial("data/RoadNetwork/roads_expressway")
roadNetwork_psp <- as.psp(roadNetwork, window=NULL, marks=NULL, check=spatstat.options("checksegments"), fatal=TRUE)
roadNetwork_linnet <- as.linnet.psp(roadNetwork_psp, sparse=TRUE)
plot(roadNetwork_linnet)
accidents_lpp <- lpp(accidents_ppp, roadNetwork_linnet)
plot(linearK(accidents_lpp, correction="none", ratio=FALSE))
plot(linearK(accidents_lpp, correction="none", ratio=FALSE))
plot(density.lpp(accidents_lpp, 1000))
plot(density.ppp(accidents_ppp, 1000))
library(leaflet)
leaflet(density.ppp(accidents_ppp, 1000))
tmap_mode("view")
library(leaflet)
leaflet(density.ppp(accidents_ppp, 1000)) %>% addTiles(group="OSM") %>%
addHeatmap(group="heat", lng=~CrdLonDeg, lat=~CrdLatDeg, max=.6, blur = 60)
library(leaflet.extras)
install.packages("leaflet.extras")
library(leaflet.extras)
leaflet(density.ppp(accidents_ppp, 1000)) %>% addTiles(group="OSM") %>%
addHeatmap(group="heat", lng=~CrdLonDeg, lat=~CrdLatDeg, max=.6, blur = 60)
library(leaflet)
leaflet(density.ppp(accidents_ppp, 1000)) %>% addTiles(group="OSM")
plot(density.lpp(accidents_lpp, 1000))
plot(density.ppp(accidents_ppp, 1000))
library(leaflet)
leaflet(plot(density.ppp(accidents_ppp, 1000))) %>%
addTiles(group="OSM")
library(leaflet)
leaflet(plot(density.ppp(accidents_lpp, 1000))) %>%
addTiles(group="OSM")
library(leaflet)
leaflet(plot(density.lpp(accidents_lpp, 1000))) %>%
addTiles(group="OSM")
library(leaflet)
temp <- density.lpp(accidents_lpp, 1000)
leaflet(temp) %>%
addTiles(group="OSM")
View(temp)
plot(nndist.lpp(accidents_lpp, k=10, method="C"))
plot(nnfun.lpp(accidents_lpp, k=10, method="C"))
plot(nndist.lpp(accidents_lpp, k=10, method="C"))
plot(nnfun.lpp(accidents_lpp, k=100, method="C"))
plot(nndist.lpp(accidents_lpp, k=10, method="C"))
plot(nnfun.lpp(accidents_lpp, k=10, method="C"))
gest(accidents_ppp)
librart(spatstat)
library(spatstat)
plot(nndist.lpp(accidents_lpp, k=10, method="C"))
plot(nnfun.lpp(accidents_lpp, k=10, method="C"))
gest(accidents_ppp)
library(spatstat)
plot(nndist.lpp(accidents_lpp, k=10, method="C"))
plot(nnfun.lpp(accidents_lpp, k=10, method="C"))
Gest(accidents_ppp)
library(spatstat)
plot(nndist.lpp(accidents_lpp, k=10, method="C"))
plot(nnfun.lpp(accidents_lpp, k=10, method="C"))
Gest(accidents_ppp, r = 10)
library(spatstat)
plot(nndist.lpp(accidents_lpp, k=10, method="C"))
plot(nnfun.lpp(accidents_lpp, k=10, method="C"))
Gest(accidents_ppp, r=10)
library(spatstat)
plot(nndist.lpp(accidents_lpp, k=10, method="C"))
plot(nnfun.lpp(accidents_lpp, k=10, method="C"))
Gest(accidents_ppp, r=5)
library(spatstat)
plot(nndist.lpp(accidents_lpp, k=10, method="C"))
plot(nnfun.lpp(accidents_lpp, k=10, method="C"))
plot(Gest(accidents_ppp))
